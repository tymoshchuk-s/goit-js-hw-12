{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '54606407-cd906ecd7aeac5d34d8006dc4';\nconst BASE_URL = 'https://pixabay.com/api/';\nexport const PER_PAGE = 15;\n\nexport default async function getImagesByQuery(query, page) {\n    const params = {\n        key: API_KEY,\n        q: query,\n        per_page: PER_PAGE,\n        page,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true\n    }\n\n    try {\n        const response = await axios(BASE_URL, { params });\n        return response.data;\n    } catch (error) {\n        throw error;\n    };\n};","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nexport const galleryEl = document.querySelector('.gallery');\nconst loader = document.querySelector('#loader');\nexport const loadMoreBtnEl = document.querySelector('#load-more-btn');\n\nexport const lightbox = new SimpleLightbox('.gallery a', {\n    captions: true,\n    captionsData: 'alt',\n    captionDelay: 250\n    });\n\nexport function createGallery(images) {\n    const markup = images\n        .map(\n            ({\n                webformatURL,\n                largeImageURL,\n                tags,\n                likes,\n                views,\n                comments,\n                downloads\n            }) => {\n                const keywords = tags.split(',').slice(0, 5).join(', ');\n                return `\n                <li class=\"gallery-item\">\n                <a href=\"${largeImageURL}\">\n                    <img src=\"${webformatURL}\" alt=\"${keywords}\" loading=\"lazy\" class=\"gallery-image\" />\n                </a>\n          <div class=\"image-info\">\n            <div class=\"info-item\">\n              <p class=\"info-title\"><b>‚ù§Ô∏è likes:</b></p>\n              <p class=\"info-value\">${likes}</p>\n            </div>\n            <div class=\"info-item\">\n              <p class=\"info-title\"><b>üëÅÔ∏è views:</b></p>\n              <p class=\"info-value\">${views}</p>\n            </div>\n            <div class=\"info-item\">\n              <p class=\"info-title\"><b>üí¨ comments:</b></p>\n              <p class=\"info-value\">${comments}</p>\n            </div>\n            <div class=\"info-item\">\n              <p class=\"info-title\"><b>‚¨áÔ∏è downloads:</b></p>\n              <p class=\"info-value\">${downloads}</p>\n            </div>\n          </div>\n            </li>`;\n            }\n        )\n        .join('');\n    \n    galleryEl.insertAdjacentHTML('beforeend', markup);\n    lightbox.refresh();\n};\n\nexport function clearGallery() {\n    galleryEl.innerHTML = '';\n};\n\nexport function showLoader() {\n    loader.hidden = false;\n};\n\nexport function hideLoader() {\n    loader.hidden = true;\n};\n\nexport function showLoadMoreButton() {\n    loadMoreBtnEl.hidden = false;\n};\n  \nexport function hideLoadMoreButton() {\n    loadMoreBtnEl.hidden = true;\n};","import getImagesByQuery from './js/pixabay-api';\n\nimport {\n    createGallery,\n    clearGallery,\n    showLoader,\n    hideLoader,\n    showLoadMoreButton,\n    hideLoadMoreButton\n    } from './js/render-functions';\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport {\n    galleryEl,\n    loadMoreBtnEl\n    } from './js/render-functions';\n    \nimport { PER_PAGE } from './js/pixabay-api';\n\nconst formEl = document.querySelector('.form');\nconst input = formEl.querySelector(\"input[name='search-text']\");\n\n\nlet query = '';\nlet page = 1;\n\nformEl.addEventListener('submit', handleSubmit);\nloadMoreBtnEl.addEventListener('click', onloadMore);\n\nhideLoadMoreButton();\n\nasync function handleSubmit(event) {\n    event.preventDefault();\n    query = input.value.trim()\n    page = 1;\n\n    if (!query) {\n        iziToast.warning({\n            message: 'Please enter a search query.',\n            position: 'topRight',\n        });\n        return;\n    }\n\n    clearGallery();\n    hideLoadMoreButton();\n    showLoader();\n    \n\n    try {\n        const data = await getImagesByQuery(query, page);\n                \n        if (data.hits.length === 0) {\n            iziToast.error({\n                message:\n                    'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight',\n            });\n            hideLoadMoreButton();            \n        } else {\n            createGallery(data.hits);\n            input.value = '';\n            if (data.totalHits < PER_PAGE) {\n                iziToast.info({\n                    message: `We're sorry, but you've reached the end of search results.`,\n                    position: 'topRight',\n                });\n                hideLoadMoreButton()\n            } else {\n                showLoadMoreButton();\n            }\n        }\n    } catch (error) {\n        iziToast.error({\n            message: `Error: ${error.message}`,\n            position: 'topRight',\n        });\n        hideLoadMoreButton();\n    } finally {\n        hideLoader();\n    }\n}\n\nasync function onloadMore() {\n    page++\n    showLoader();\n    hideLoadMoreButton();\n\ntry {\n    const data = await getImagesByQuery(query, page);\n    createGallery(data.hits);\n    \n    const totalResult = data.totalHits;\n    const totalPages = Math.ceil(totalResult / PER_PAGE);\n\n        if (page >= totalPages) {\n            iziToast.info({\n                message: `We're sorry, but you've reached the end of search results.`,\n                position: 'topRight',\n            });\n            hideLoadMoreButton()\n        } else {\n            showLoadMoreButton();\n        }\n    \n    \n    \n    const cardEl = document.querySelector('.gallery-item');\n    if (cardEl) {\n        const cardHeight = cardEl.getBoundingClientRect().height;\n        window.scrollBy({\n            left: 0,\n            top: cardHeight * 2,\n            behavior: 'smooth'\n        });\n    }\n    } catch (error) {\n        iziToast.error({\n            message: `Error: ${error.message}`,\n            position: 'topRight',\n        });\n    } finally {\n    hideLoader();\n    }\n}"],"names":["API_KEY","BASE_URL","PER_PAGE","getImagesByQuery","query","page","params","axios","error","galleryEl","loader","loadMoreBtnEl","lightbox","SimpleLightbox","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","keywords","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","formEl","input","handleSubmit","onloadMore","event","iziToast","data","totalResult","totalPages","cardEl","cardHeight"],"mappings":"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"}